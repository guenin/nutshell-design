<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="/js/jquery-1.3.2.min.js" type="text/javascript"></script>
    
    <script src="/js/openfeedback.js" type="text/javascript"></script>
        

    <link rel="alternate" type="application/atom+xml" title="Comments on this page" href="/comments/feed/ch01.html" />
    <link rel="alternate" type="application/atom+xml" title="All comments on Rails in a Nutshell" href="/comments/feed?id=book" />

        <title>Chapter 1. Rails</title><link rel="stylesheet" href="/css/ofps_main.css" type="text/css" /><link rel="stylesheet" href="/css/ofps_ui.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.74.3" /><link rel="home" href="index.html" title="Rails in a Nutshell" /><link rel="up" href="index.html" title="Rails in a Nutshell" /><link rel="prev" href="index.html" title="Rails in a Nutshell" /><link rel="next" href="ch02.html" title="Chapter 2. Action Controller" /></head><body><div class="oreilly-header"><ul><li><p><a href="http://oreilly.com/"><img alt="O'Reilly Logo" src="/oreilly-logo.jpg" /></a></p></li><li><p id="oreilly-breadcrumbs"><a href="http://labs.oreilly.com/">Labs</a> &gt; <a href="http://labs.oreilly.com/ofps.html">OFPS</a> &gt; <a href="index.html">Rails in a Nutshell</a></p></li><li><p class="login">

          <a href="/signin">Sign-in</a> or 
          <a href="/register">Register</a>

            </p></li><li><p class="ofps-show-hide-all-comments"><a href="#" class="ofps-show-hide-all-comments-toggle">Show all comments</a></p></li><li><p><a href="http://labs.oreilly.com/ofps.html">Help</a></p></li></ul></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 1. Rails</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" id="rails_id341512" xml:lang="en"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Rails</h2></div></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" id="rails_id394362">Framework</h2></div></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title" id="rails_id394472">Logging</h3></div></div></div><p id="rails_id394477">Logging provides a way to record messages from a running application. The messages
                can be used for debugging or analysis at a later time. Rails produces very verbose,
                informative, colored logs with each request. Each component of Rails is configured
                with a logger during initialization. </p><div class="comment_container" name="c_rails_id394477" id="c_rails_id394477"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394477">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394486">All of the most commonly used classes in Rails provide access to a logger
                    <code class="literal">logger</code> accessor for convenient access to the logger. This
                includes Active Record models, controllers, views, and Active Resource models. The
                    <code class="literal">logger</code> accessor returns the currently configured logger for
                the class.</p><div class="comment_container" name="c_rails_id394486" id="c_rails_id394486"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394486">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394501">The logger has a method for each of the log levels. Adding a message to the log is
                as simple as calling the method for the log level you want the message to be logged
                at. The following code logs a message at the :info log level:</p><div class="comment_container" name="c_rails_id394501" id="c_rails_id394501"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394501">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><div class="informalexample" id="rails_id394509"><pre class="programlisting" id="rails_id394511">logger.info "Successful login for #{@user.name}"</pre><div class="comment_container" name="c_rails_id394511" id="c_rails_id394511"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394511">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div></div><p id="rails_id394521"></p><div class="comment_container" name="c_rails_id394521" id="c_rails_id394521"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394521">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394523">Whether or not a particular message is logged by the logger depends on the log
                level. If the severity of the message being logged is less than the current log
                level then the message is ignored. The logging severities supported by Rails
                compatible loggers can be seen in <a class="xref" href="ch01.html#rails-logger-severities" title="Table 1.1. Logging severities">Table 1.1, “Logging severities”</a>.</p><div class="comment_container" name="c_rails_id394523" id="c_rails_id394523"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394523">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><div class="table" id="rails-logger-severities"><p class="title"><b>Table 1.1. Logging severities</b></p><div class="table-contents"><table summary="Logging severities" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Severity</th></tr></thead><tbody><tr><td>:debug</td><td>0</td></tr><tr><td>:info</td><td>1</td></tr><tr><td>:warn</td><td>2</td></tr><tr><td>:error</td><td>3</td></tr><tr><td>:fatal</td><td>4</td></tr><tr><td>:unknown</td><td>5</td></tr></tbody></table></div></div><br class="table-break" /><div class="comment_container" name="c_rails-logger-severities" id="c_rails-logger-severities"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails-logger-severities">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394542">By default, the Rails test and development environments log with a level of
                    <code class="literal">:debug</code>. The Rails production environment uses a default log
                level of <code class="literal">:info</code>. The logger will not log messages logged at a
                level lower than its current log level. This means that the development environment
                will log all messages, whereas the production environment will ignore all log
                messages at a log level lower than <code class="literal">:info</code>. This allows you to
                place different logging statements throughout your code with different log levels. </p><div class="comment_container" name="c_rails_id394542" id="c_rails_id394542"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394542">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394566">The simplest way to monitor the log file of a running application is to use the
                Unix <code class="literal">tail</code> command.</p><div class="comment_container" name="c_rails_id394566" id="c_rails_id394566"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394566">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394574">The easiest way to debug these problems is to monitor the logfiles. An easy way to
                monitor your logs is to use the Unix or Linux <code class="literal">tail</code> command.
                Execute the following from your project's root directory to have <code class="literal">tail</code> monitor the logfile.</p><div class="comment_container" name="c_rails_id394574" id="c_rails_id394574"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394574">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><pre class="programlisting" id="rails_id394588">$ tail -f log/development.log</pre><div class="comment_container" name="c_rails_id394588" id="c_rails_id394588"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394588">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394591">The <code class="literal">-f</code> flag tells <code class="literal">tail</code> to output appended
                data as the file grows.</p><div class="comment_container" name="c_rails_id394591" id="c_rails_id394591"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394591">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title" id="rails_id394602">Configuration</h4></div></div></div><p id="rails_id394607">Loggers are very simple to setup, and if you are using the default Rails
                    configuration then you don't need to worry about configuring a logger at all.
                    The default logger used by Rails is the <code class="classname">ActiveSupport::BufferedLogger</code>. The buffered logger is good in a
                    production environment because log messages are not immediately flushed to the
                    disk. Logs are buffered in memory and then flushed at the end of the request or
                    when the buffer is full, which helps reduce disk <acronym class="acronym">I/O</acronym> in a
                    production environment. You can configure logger other than the default by
                    setting <code class="literal">config.logger</code> in the </p><div class="comment_container" name="c_rails_id394607" id="c_rails_id394607"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394607">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394631">The logger logs to a file in the <code class="filename">log</code> folder of your
                    application named after the environment you run your application in. For
                    example, an application running in the development environment logs to a file
                    named <code class="filename">log/development.log</code>. The log file should be the first
                    place you look when you are investigating any odd behavior of your application. </p><div class="comment_container" name="c_rails_id394631" id="c_rails_id394631"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394631">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394648">Rails is compatible with the Ruby <code class="classname">Logger</code> class, the
                        <code class="classname">Log4r::Logger</code>, the <code class="classname">SyslogLogger</code>, and any other logger implementing a similar,
                    compatible interface. </p><div class="comment_container" name="c_rails_id394648" id="c_rails_id394648"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394648">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><p id="rails_id394664">There are three settings pertaining to the logger in the configuration file
                    for your environment:</p><div class="comment_container" name="c_rails_id394664" id="c_rails_id394664"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id394664">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><div class="variablelist"><dl><dt id="rails_id116546"><span class="term"><code class="literal">logger</code></span></dt><dd><p id="rails_id394680">The logger to use for logging in all configured frameworks.
                                Defaults to <code class="classname">ActiveSupport::BufferedLogger</code>.</p></dd><div class="comment_container" name="c_rails_id116546" id="c_rails_id116546"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id116546">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><dt id="rails_id115649"><span class="term"><code class="literal">log_level</code></span></dt><dd><p id="rails_id394699">The log level to set the logger at. Defaults to <code class="literal">:info</code> in the production environment and <code class="literal">:debug</code> in any other environment.</p></dd><div class="comment_container" name="c_rails_id115649" id="c_rails_id115649"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id115649">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div><dt id="rails_id105821"><span class="term"><code class="literal">log_path</code></span></dt><dd><p id="rails_id394721">The destination file for log messages. Defaults to <code class="filename">log/#{<code class="literal">environment</code>}.log</code> where
                                    <code class="literal">environment</code> is the current Rails environment,
                                such as development.</p></dd><div class="comment_container" name="c_rails_id105821" id="c_rails_id105821"><p class="comment_count">
          <a class="comment_count" href="#">No comments yet</a>
      </p><div class="comment" id="comments_for_rails_id105821">


        <h4><a href="#" class="make_comment">Add a comment</a></h4></div><div class="reset"></div></div></dl></div></div></div></div></div><!-- Comment form -->

   <div id="comment_form_main" class="comment_form">


<h5>You must sign in or <a href="/register">register</a> before commenting</h5>

  <form action="/signin" method="post"><table>
     <tr class="field">
<td class="label" valign="top"><label>Username:</label></td>
<td class="field" colspan="2" valign="top"><input id="username" name="username" type="text" /></td>
</tr>
     <tr class="field">
<td class="label" valign="top"><label></label></td>
<td class="field" colspan="2" valign="top"><input name="redirect_to" type="hidden" value="http://rails-nutshell.labs.oreilly.com/ch01.html" /></td>
</tr>
     <tr class="field">
<td class="label" valign="top"><label></label></td>
<td class="field" colspan="2" valign="top"><input name="xml_id" type="hidden" /></td>
</tr>
     <tr class="field">
<td class="label" valign="top"><label>Password:</label></td>
<td class="field" colspan="2" valign="top"><input id="password" name="password" type="password" /></td>
</tr>
  <tr class="field">
<td class="label" valign="top"><label></label></td>
<td class="field" colspan="2" valign="top"><input id="submit" name="submit" type="submit" value="Sign in" /></td>
</tr>
  </table></form>



</div>


<div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Rails in a Nutshell </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 2. Action Controller</td></tr></table></div><div class="footer-copyright"></div></body></html>
